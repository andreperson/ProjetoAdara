@model Domain.ModelView.ClientePrecoModelView


@section Scripts {


    <script type="text/javascript">

        function moeda(valor, casas, separdor_decimal, separador_milhar) {

            var valor_total = parseInt(valor * (Math.pow(10, casas)));
            var inteiros = parseInt(parseInt(valor * (Math.pow(10, casas))) / parseFloat(Math.pow(10, casas)));
            var centavos = parseInt(parseInt(valor * (Math.pow(10, casas))) % parseFloat(Math.pow(10, casas)));


            if (centavos % 10 == 0 && centavos + "".length < 2) {
                centavos = centavos + "0";
            } else if (centavos < 10) {
                centavos = "0" + centavos;
            }

            var milhares = parseInt(inteiros / 1000);
            inteiros = inteiros % 1000;

            var retorno = "";

            if (milhares > 0) {
                retorno = milhares + "" + separador_milhar + "" + retorno
                if (inteiros == 0) {
                    inteiros = "000";
                } else if (inteiros < 10) {
                    inteiros = "00" + inteiros;
                } else if (inteiros < 100) {
                    inteiros = "0" + inteiros;
                }
            }
            retorno += inteiros + "" + separdor_decimal + "" + centavos;


            return retorno;

        }



        $(function () {
            $("#Precopalavra").maskMoney({ showSymbol: true, symbol: "", decimal: ",", thousands: "." });
            $("#Precolinha").maskMoney({ showSymbol: true, symbol: "", decimal: ",", thousands: "." });
            $("#Precohora").maskMoney({ showSymbol: true, symbol: "", decimal: ",", thousands: "." });
            $("#Precominimo").maskMoney({ showSymbol: true, symbol: "", decimal: ",", thousands: "." });
        })

    </script>

}


@{
    ViewBag.Title = "Adara";
}

@*<div id="submenu_tab">
    <a href="@Domain.Util.config.UrlSite/Client/ClientePreco" class="btn btn-sm btn-default btn-flat">ClientePreco</a>
    <a href="@Domain.Util.config.UrlSite/ClientType/ClientePrecoTipo" class="btn btn-sm btn-default btn-flat">ClientePreco Tipo</a>
</div>*@


@using (Html.BeginForm("ClientePreco", "ClientPrice", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)


    <div class="main-content">
        <h2>Adicionar Preco por Cliente</h2>

        <div style="color: #ff6a00; font-size: large; padding: 20px 20px 20px 20px;">
            @ViewBag.erro
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.clienteid)
        </div>
        <div class="inputgrande">
            @Html.DropDownListFor(x => x.clienteid, new SelectList(Model.Clientes, "clienteid", "Fantasia"))
            @Html.ValidationMessageFor(model => model.clienteid)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Competencias)
        </div>
        <div class="inputgrande">
            @Html.DropDownListFor(x => x.competenciaid, new SelectList(Model.Competencias, "competenciaid", "Descricao"))
            @Html.ValidationMessageFor(model => model.competenciaid)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.ParIdiomas)
        </div>
        <div class="inputgrande">
            @Html.DropDownListFor(x => x.paridiomaid, new SelectList(Model.ParIdiomas, "paridiomaid", "Descricao"))
            @Html.ValidationMessageFor(model => model.paridiomaid)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Moedas)
        </div>
        <div class="inputgrande">
            @Html.DropDownListFor(x => x.moedaid, new SelectList(Model.Moedas, "moedaid", "Descricao"))
            @Html.ValidationMessageFor(model => model.moedaid)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Precolinha)
        </div>
        <div class="inputgrande">
            @Html.EditorFor(model => model.Precolinha)
            @Html.ValidationMessageFor(model => model.Precolinha)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Precopalavra)
        </div>
        <div class="inputgrande">
            @Html.EditorFor(model => model.Precopalavra)
            @Html.ValidationMessageFor(model => model.Precopalavra)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Precohora)
        </div>
        <div class="inputgrande">
            @Html.EditorFor(model => model.Precohora)
            @Html.ValidationMessageFor(model => model.Precohora)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Precominimo)
        </div>
        <div class="inputgrande">
            @Html.EditorFor(model => model.Precominimo)
            @Html.ValidationMessageFor(model => model.Precominimo)
        </div>
        <div class="editor-label">
            Ativo
        </div>
        <div class="inputgrande">
            @if (Model.status == 1)
            {
                Model.statusb = true;
            }
            else
            {
                Model.statusb = false;
            }
            @Html.CheckBoxFor(model => model.statusb)
            @Html.ValidationMessageFor(model => model.status)
        </div>
        <p>&nbsp;</p>
        <table>
            <tr>
                <td>
                    <button name="button" class="botao01" value="register">Salvar</button>
                    @Html.Hidden("ClientePrecoid", Model.ClientePrecoid)
                    @Html.Hidden("dataincl", Model.DataIncl)
                    @Html.Hidden("Menuid", Model.menuid)
                    @Html.Hidden("MenuSubId", Model.menusubid)
                    <input id="repreid" value="@ViewBag.repreid" type="hidden" />
                </td>
            </tr>
        </table>
    </div>
    <p>&nbsp;</p>
    <div class="row">
        <!-- Left col -->
        <div class="col-md-12">
            <!-- TABLE: LATEST ORDERS -->
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">Cadastros</h3>
                    <div class="box-tools pull-right">@Model.ClientePrecos.Count registro(s) listado(s)</div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="table-responsive">
                        <table class="table no-margin" id="ajax">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Competência</th>
                                    <th>Par de Idiomas</th>
                                    <th>Moeda</th>
                                    <th>$&nbsp;Palavra</th>
                                    <th>$&nbsp;Linha</th>
                                    <th>$&nbsp;Hora</th>
                                    <th>$&nbsp;Mínimo</th>
                                    <th class="ico">Status</th>
                                    <th class="ico">Editar</th>
                                    <th class="ico">Excluir</th>
                                </tr>
                            </thead>
                            @{
                                var st = "Inativo";
                            }
                            @foreach (var item in Model.ClientePrecos)
                            {
                                st = "Inativo";

                                if (item.Status == 1)
                                {
                                    st = "Ativo";
                                }
                                <tr id="sumir" style="visibility: visible" class="tablelist int">
                                    <td class="minimo">@item.clienteprecoid</td>
                                    <td class="medio">@item.Cliente.Fantasia</td>
                                    <td class="medio">@item.Competencia.Descricao</td>
                                    <td class="medio">@item.ParIdioma.Descricao</td>
                                    <td class="medio">@item.Moeda.Descricao</td>
                                    <td class="minimo">@string.Format("{0:N2}", Convert.ToDouble(item.PrecoPalavra))</td>
                                    <td class="minimo">@string.Format("{0:N2}", Convert.ToDouble(@item.PrecoLinha))</td>
                                    <td class="minimo">@string.Format("{0:N2}", Convert.ToDouble(@item.PrecoHora))</td>
                                    <td class="minimo">@string.Format("{0:N2}", Convert.ToDouble(@item.PrecoMinimo))</td>                                   <td class="ico">
                                        <img src="@Domain.Util.config.UrlImg/icone/ico-@st-.png" width="18" title="@st">
                                    </td>
                                    <td class="ico">
                                        <a href="@Domain.Util.config.UrlSite/ClientPrice/ClientePreco/@ViewBag.MenuId/@ViewBag.MenuSubId/@item.clienteprecoid">
                                            <img src="@Domain.Util.config.UrlImg/icone/ico-edit.png" width="30" />
                                        </a>
                                    </td>
                                    <td class="ico">
                                        <a href="@Domain.Util.config.UrlSite/Delete/Deletar/@ViewBag.MenuId/@ViewBag.MenuSubId/@item.clienteprecoid?ac=ClientePrecoDelete&cr=ClientPrice&txt=@item.ParIdioma.Descricao">
                                            <img src="@Domain.Util.config.UrlImg/icone/ico-delete.png" width="30" />
                                        </a>
                                    </td>
                                </tr>
                            }
                        </table>
                    </div>
                </div>
                <div class="box-footer clearfix">&nbsp;</div>
            </div>
        </div>
    </div>

                                    }
